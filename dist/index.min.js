"use strict";function __rest(e,a){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)a.indexOf(l[r])<0&&(t[l[r]]=e[l[r]])}return t}function setupGlobal(e,{callbackNameFunc:a}){const t=a(null);e[t]||(e[t]=(t=>{var{requestID:l}=t,r=__rest(t,["requestID"]);const n=a(l);e[n]&&e[n](r),delete e[n]}))}function promisifyCallback(e,{callbackName:a,funcToWrap:t}){return new Promise(l=>{e[a]=(e=>l(e)),t()})}function simplifyCallback(e,a){return promisifyCallback(e,a)}function getModuleKeys(e){return[...Object.keys(e),...Object.getOwnPropertyNames(Object.getPrototypeOf(e))]}function getCallbackName({moduleName:e,funcName:a,requestID:t}){return`${e}_${a}Callback${null!==t?`_${t}`:""}`}function wrapAndroidModule(e,a,t){const l=getModuleKeys(t).filter(e=>"function"==typeof t[e]).map(l=>{let r=0;const n=e=>getCallbackName({moduleName:a,requestID:e,funcName:l});return setupGlobal(e,{callbackNameFunc:n}),{[l]:(...a)=>{const o=`${r}`;return r+=1,simplifyCallback(e,{callbackName:n(o),funcToWrap:t[l].bind(t,o,...a,n(null))})}}}).reduce((e,a)=>Object.assign({},e,a),{});return{invoke:(e,...a)=>l[e](...a.map(({paramValue:e})=>e))}}function wrapIOSModule(e,a,t){const l={};return{invoke:(r,...n)=>{const o=(l[r]||-1)+1;l[r]=o;const c=e=>getCallbackName({moduleName:a,requestID:e,funcName:r});setupGlobal(e,{callbackNameFunc:c});const u={method:r,parameters:Object.assign({},n.map(({paramName:e,paramValue:a})=>({[e]:a})).reduce((e,a)=>Object.assign({},e,a),{}),{requestID:o}),callbackName:c(null)};return simplifyCallback(e,{callbackName:c(o),funcToWrap:t.postMessage.bind(t,u)})}}}function wrapModule(e,a){if(e[a]){const t=e[a],l=wrapAndroidModule(window,a,t);e[a]=l}else if(e.webkit&&e.webkit.messageHandlers&&e.webkit.messageHandlers[a]){const t=wrapIOSModule(e,a,e.webkit.messageHandlers[a]);e[a]=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAndroidModule=wrapAndroidModule,exports.wrapIOSModule=wrapIOSModule,exports.wrapModule=wrapModule;