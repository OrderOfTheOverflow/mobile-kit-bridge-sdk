"use strict";function __rest(e,a){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)a.indexOf(r[n])<0&&(t[r[n]]=e[r[n]])}return t}function getModuleKeys(e){return[...Object.keys(e),...Object.getOwnPropertyNames(Object.getPrototypeOf(e))]}function getCallbackName({moduleName:e,funcName:a,requestID:t}){return`${e}_${a}Callback${null!==t?`_${t}`:""}`}function promisifyCallback(e,a){var{funcToWrap:t}=a;const r=getCallbackName(__rest(a,["funcToWrap"]));return new Promise(a=>{e[r]=(e=>a(e)),t()})}function setUpGlobalCallback(e,a){var t=__rest(a,["currentRequestIDFunc"]);const r=getCallbackName(Object.assign({},t,{requestID:null}));e[r]||(e[r]=(a=>{var{requestID:r}=a,n=__rest(a,["requestID"]);const o=getCallbackName(Object.assign({},t,{requestID:r}));e[o]&&e[o](n),delete e[o]}))}function wrapAndroidModule(e,a,t){const r=getModuleKeys(t).filter(e=>"function"==typeof t[e]).map(r=>{let n=0;return setUpGlobalCallback(e,{moduleName:a,currentRequestIDFunc:()=>n,funcName:r}),{[r]:(...o)=>{const u=`${n}`;return n+=1,promisifyCallback(e,{moduleName:a,requestID:u,funcName:r,funcToWrap:t[r].bind(t,u,...o)})}}}).reduce((e,a)=>Object.assign({},e,a),{});return{invoke:(e,...a)=>r[e](...a.map(({paramValue:e})=>e))}}function wrapIOSModule(e,a,t){const r={};return{invoke:(n,...o)=>{const u=(r[n]||-1)+1;r[n]=u,setUpGlobalCallback(e,{moduleName:a,currentRequestIDFunc:()=>r[n],funcName:n});const l={method:n,parameters:Object.assign({},o.map(({paramName:e,paramValue:a})=>({[e]:a})).reduce((e,a)=>Object.assign({},e,a),{}),{requestID:u}),callbackName:getCallbackName({moduleName:a,funcName:n,requestID:null})};return promisifyCallback(e,{moduleName:a,funcName:n,funcToWrap:t.postMessage.bind(t,l),requestID:`${u}`})}}}function createMethodParameter(e,a){return{paramName:e,paramValue:a}}function wrapModule(e,a){if(e[a]){const t=e[a],r=wrapAndroidModule(window,a,t);e[a]=r}else if(e.webkit&&e.webkit.messageHandlers&&e.webkit.messageHandlers[a]){const t=wrapIOSModule(e,a,e.webkit.messageHandlers[a]);e.webkit.messageHandlers[a]=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMethodParameter=createMethodParameter,exports.wrapAndroidModule=wrapAndroidModule,exports.wrapIOSModule=wrapIOSModule,exports.wrapModule=wrapModule;